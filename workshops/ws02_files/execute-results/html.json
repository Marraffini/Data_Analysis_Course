{
  "hash": "a495c6d390e25ebd2ad3e5c970c6a009",
  "result": {
    "markdown": "---\ntitle: \"Chapter 2 Workshop\"\n---\n\n\n\n# Dataset **`Prestige`**\n\nAs you work through this workshop, you can copy the code and paste it into a code chunk. Write notes and observations to your self as you go. \n\nWe will be using a well-known dataset called `Prestige` from the `car`\tR package. This dataset deals with prestige ratings of Canadian occupations. The `Prestige` dataset has 102 rows and 6 columns. Each row (or 'observation') is an occupation.\n\nThis data frame contains the following columns:\n\n* `education` - Average education of occupational incumbents, years, in 1971.\n\n* `income` - Average income of incumbents, dollars, in 1971.\n\n* `women` - Percentage of incumbents who are women.\n\n*  `prestige` - Pineo-Porter prestige score for occupation, from a social survey conducted in the mid-1960s.\n\n* `census` - Canadian Census occupational code.\n\n*  `type` - Type of occupation. A factor with levels: bc, Blue Collar; prof, Professional, Managerial, and Technical; wc, White Collar. (includes four missing values).\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nFirst we'll load the data. The dataset sits in the `car` package, so you need to load the `car` package first.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(car)\ndata(Prestige)\n```\n:::\n\n\n\n# Exercise 2.1 {-}\n\nDraw a bar chart for `type`. These plots show the count or relative frequency of blue collar (`bc`), professional (`prof`), and white collar (`wc`) professions in the dataset. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\np <- Prestige |> \n  ggplot() +\n  aes(type) + \n  geom_bar()\n\np\n```\n:::\n\n\nOr with `plotly` (which works for HTML, not for PDF)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\n\nggplotly(p)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-7135c940650b3a744d6f\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7135c940650b3a744d6f\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036],\"base\":[0,0,0,0],\"x\":[1,2,3,4],\"y\":[44,31,23,4],\"text\":[\"count: 44<br />type: bc\",\"count: 31<br />type: prof\",\"count: 23<br />type: wc\",\"count:  4<br />type: NA\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(89,89,89,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":37.260273972602747},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,4.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"bc\",\"prof\",\"wc\"],\"tickvals\":[1,2,3],\"categoryorder\":\"array\",\"categoryarray\":[\"bc\",\"prof\",\"wc\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"type\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-2.2000000000000002,46.200000000000003],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"10\",\"20\",\"30\",\"40\"],\"tickvals\":[0,10,20,30.000000000000004,40],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"10\",\"20\",\"30\",\"40\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"count\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"181b1e07d121\":{\"x\":{},\"type\":\"bar\"}},\"cur_data\":\"181b1e07d121\",\"visdat\":{\"181b1e07d121\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nOr with old-style R plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# or\nlibrary(car)\nbarplot(table(Prestige$type))\n```\n:::\n\n\n\n\n# Exercise 2.2 {-}\n\nDraw a histogram of `prestige`. \n\nBelow demonstrates the flexibility of `ggplot` code. You can specify the `data` argument by piping it into `ggplot`, or by putting it as an argument to `ggplot` or a `geom_`. Likewise, the `mapping` or `aes` information, which determines which variables are used where, can be added as an extra line or specified inside the `ggplot` or `geom_` function.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() +\n  aes(x = prestige) +\n  geom_histogram()\n```\n:::\n\n\nNow, this histogram, where the number of bins has been chosen for us, looks a bit \"spiky\" to my eye. You can control the number of bins by adding an argument `bins = 10`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() +\n  aes(x = prestige) +\n  geom_histogram(bins=10)\n```\n:::\n\n\n`ggplot` is very flexible as to where you put the data and the `aes` information; all of these methods give the same result.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() +\n  aes(x = prestige) +\n  geom_histogram(bins=10)\n```\n\n```{.r .cell-code}\nggplot(\n  data = Prestige,\n  mapping = aes(x = prestige)\n  ) +\n  geom_histogram(bins=10)\n```\n\n```{.r .cell-code}\nggplot(Prestige) +\n  aes(x = prestige) +\n  geom_histogram(bins=10) \n```\n\n```{.r .cell-code}\nggplot() +\n  geom_histogram(\n    data = Prestige,\n    mapping = aes(x = prestige),\n    bins = 10\n    )\n```\n\n```{.r .cell-code}\n# or\n# library(plotly)\n# p <- Prestige |> \n#   ggplot() +\n#   aes(prestige) +\n#   geom_histogram(bins=10)\n# \n# ggplotly(p)\n\n# or\n# hist(Prestige$prestige)\n```\n:::\n\n\nNow let's display the prestige scores for each profession as a dot plot.\n\nNote that I'm including the code-chunk option `#| fig-height: 12` at the beginning of my code chunk so that the plot is big enough to show all the professions without overlap. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |>\n  ggplot() + \n  aes(x = rownames(Prestige), y = prestige) +\n  geom_point() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](ws02_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nWhat a mess! \n\nWe can tidy it up by ordering the professions on the plot according to `prestige`. First, we move the professions from rownames to a variable. Then, we `fct_reorder` the professions using the `prestige` scores. Then, the resulting data gets piped into `ggplot`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  rownames_to_column(var = \"profession\") |> \n  mutate(\n    profession = fct_reorder(profession, prestige)\n    ) |>\n  ggplot() + \n  aes(x = profession, y = prestige, colour = type) +\n  geom_point() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](ws02_files/figure-html/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\n\n# Exercise 2.3 {-}\n\na) Obtain some summary statistics for `prestige`. There are a few options for this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Prestige)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   education          income          women           prestige    \n Min.   : 6.380   Min.   :  611   Min.   : 0.000   Min.   :14.80  \n 1st Qu.: 8.445   1st Qu.: 4106   1st Qu.: 3.592   1st Qu.:35.23  \n Median :10.540   Median : 5930   Median :13.600   Median :43.60  \n Mean   :10.738   Mean   : 6798   Mean   :28.979   Mean   :46.83  \n 3rd Qu.:12.648   3rd Qu.: 8187   3rd Qu.:52.203   3rd Qu.:59.27  \n Max.   :15.970   Max.   :25879   Max.   :97.510   Max.   :87.20  \n     census       type   \n Min.   :1113   bc  :44  \n 1st Qu.:3120   prof:31  \n Median :5135   wc  :23  \n Mean   :5402   NA's: 4  \n 3rd Qu.:8312            \n Max.   :9517            \n```\n:::\n\n```{.r .cell-code}\nlibrary(psych)\n\ndescribe(Prestige)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          vars   n    mean      sd  median trimmed     mad     min      max\neducation    1 102   10.74    2.73   10.54   10.63    3.15    6.38    15.97\nincome       2 102 6797.90 4245.92 5930.50 6161.49 3060.83  611.00 25879.00\nwomen        3 102   28.98   31.72   13.60   24.74   18.73    0.00    97.51\nprestige     4 102   46.83   17.20   43.60   46.20   19.20   14.80    87.20\ncensus       5 102 5401.77 2644.99 5135.00 5393.87 4097.91 1113.00  9517.00\ntype*        6  98    1.79    0.80    2.00    1.74    1.48    1.00     3.00\n             range skew kurtosis     se\neducation     9.59 0.32    -1.03   0.27\nincome    25268.00 2.13     6.29 420.41\nwomen        97.51 0.90    -0.68   3.14\nprestige     72.40 0.33    -0.79   1.70\ncensus     8404.00 0.11    -1.49 261.89\ntype*         2.00 0.40    -1.36   0.08\n```\n:::\n\n```{.r .cell-code}\ndescribeBy(education + income + women + prestige ~ type, \n           data = Prestige)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n Descriptive statistics by group \ntype: bc\n          vars  n    mean      sd  median trimmed     mad     min     max\neducation    1 44    8.36    1.16    8.35    8.32    1.14    6.38   10.93\nincome       2 44 5374.14 2004.33 5216.50 5338.56 2275.05 1656.00 8895.00\nwomen        3 44   18.97   26.15    4.72   14.48    7.01    0.00   90.67\nprestige     4 44   35.53   10.02   35.90   35.46   11.34   17.30   54.90\n            range skew kurtosis     se\neducation    4.55 0.34    -0.76   0.18\nincome    7239.00 0.17    -1.00 302.16\nwomen       90.67 1.36     0.51   3.94\nprestige    37.60 0.05    -1.03   1.51\n------------------------------------------------------------ \ntype: prof\n          vars  n     mean      sd  median trimmed     mad     min      max\neducation    1 31    14.08    1.39   14.44   14.16    1.22   11.09    15.97\nincome       2 31 10559.45 5422.82 8865.00 9700.04 3955.58 4614.00 25879.00\nwomen        3 31    25.51   28.37   11.68   21.03   13.86    0.58    96.12\nprestige     4 31    67.85    8.68   68.40   67.34    9.19   53.80    87.20\n             range  skew kurtosis     se\neducation     4.88 -0.47    -0.93   0.25\nincome    21265.00  1.37     1.36 973.97\nwomen        95.54  1.14    -0.04   5.09\nprestige     33.40  0.36    -0.67   1.56\n------------------------------------------------------------ \ntype: wc\n          vars  n    mean      sd  median trimmed     mad     min     max\neducation    1 23   11.02    0.92   11.13   11.03    0.68    9.17   12.79\nincome       2 23 5052.30 1944.32 4741.00 4960.53 2342.51 2448.00 8780.00\nwomen        3 23   52.83   33.11   56.10   53.19   47.77    3.16   97.51\nprestige     4 23   42.24    9.52   41.50   41.61    8.60   26.50   67.50\n            range  skew kurtosis     se\neducation    3.62 -0.20    -0.27   0.19\nincome    6332.00  0.44    -1.18 405.42\nwomen       94.35 -0.10    -1.58   6.90\nprestige    41.00  0.63     0.18   1.98\n```\n:::\n:::\n\n\nb) Make a summary dataset, average variable for each type of occupation.\n\n\n::: {.cell}\n\n:::\n\n\n\n# Exercise 2.4 {-}\n\nMake a boxplot of `prestige ~ type`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() +\n  aes(y=prestige, x=type) +\n  geom_boxplot()\n```\n\n```{.r .cell-code}\n# or\n# library(plotly)\n# p <- Prestige |> ggplot() + \n#   aes(y=prestige, x=type) + geom_boxplot()\n# ggplotly(p)\n\n# or\n# library(lattice)\n# bwplot(prestige ~ type, data=Prestige)\n\n# as violin plots\nPrestige |> \n  ggplot() +\n  aes(y=prestige, x=type) +\n  geom_violin()\n```\n\n```{.r .cell-code}\n# Or put it all together\nPrestige |> \n  ggplot() +\n  aes(y=prestige, x=type) +\n  geom_violin() + \n  geom_boxplot(col = 2, alpha = .2) +\n  geom_jitter(alpha = .2, width = .2, height = 0, colour = 4)\n```\n:::\n\n\n\n# Exercise 2.5 {-}\n\nObtain the Empirical Cumulative Distribution Function (ECDF) graphs of `prestige ~ type`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() + \n  aes(prestige, colour=type) +\n  stat_ecdf()\n```\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() + \n  aes(prestige) +\n  stat_ecdf() + \n  facet_wrap(~type)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() + \n  aes(\n    x = prestige, # these aes settings are used\n    col = type    # by both geoms\n    ) +\n  geom_density(\n    aes(fill = type), # the 'fill' aes goes here because \n    alpha = .2        # geom_rug doesn't use 'fill'\n    ) +\n  geom_rug()\n```\n:::\n\n\nWith which plot – the ECDF or the density plot – is it easier to compare the distributions of prestige scores among these groups?\n\n# Exercise 2.6 {-}\n\nObtain the \\{0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95\\} quantiles of `prestige`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npr <- c(0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)\n\nPrestige |> \n  summarise(\n    probs = pr,\n    quants = quantile(prestige, pr)\n    )\n\n# or simply\nquantile(Prestige$prestige, pr)\n```\n:::\n\n\n\n# Exercise 2.7 {-}\n\nObtain the scatter plot (with and without marginal boxplots) **prestige vs. education **: How can you describe the relationship implied by the pattern?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggExtra)\n\np1 <- Prestige |> \n  ggplot() + \n  aes(x = education, y = prestige) +\n  geom_point() + \n  geom_smooth(col = 2) + \n  geom_smooth(method = \"lm\", se = FALSE)\n\nggMarginal(p1, type=\"boxplot\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(car)\n\nscatterplot(education ~ prestige, data = Prestige)\n```\n:::\n\n\nThe later plot will show prediction interval ribbon while the first plot will show the confidence interval ribbon.\n\n# Exercise 2.8 {-}\n\nObtain the bubble or balloon plot  **prestige vs. education vs. income** (income forming the bubble size):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\nPrestige |> \n  ggplot() + \n  aes(x = education, y = prestige, size = income) +\n  geom_point()\n```\n\n```{.r .cell-code}\n# or\n\nlibrary(plotly)\n\np <- Prestige |>\n  ggplot() + \n  aes(x = education, y = prestige, size = income) +\n  geom_point()\n\nggplotly(p)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-4cb9d8b3284a0469934c\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4cb9d8b3284a0469934c\">{\"x\":{\"data\":[{\"x\":[13.109999999999999,12.26,12.77,11.42,14.619999999999999,15.640000000000001,15.09,15.44,14.52,14.640000000000001,12.390000000000001,12.300000000000001,13.83,14.44,14.359999999999999,14.210000000000001,15.77,14.15,15.220000000000001,14.5,15.970000000000001,13.619999999999999,15.08,15.960000000000001,15.94,14.710000000000001,12.460000000000001,9.4499999999999993,13.619999999999999,15.210000000000001,12.789999999999999,11.09,12.710000000000001,11.44,11.59,11.49,11.32,10.640000000000001,11.359999999999999,9.1699999999999999,12.09,11.039999999999999,9.2200000000000006,10.07,10.51,11.199999999999999,11.130000000000001,11.43,11,9.8399999999999999,11.130000000000001,10.050000000000001,9.6199999999999992,9.9299999999999997,11.6,11.09,11.029999999999999,9.4700000000000006,10.93,7.7400000000000002,8.5,10.57,9.4600000000000009,7.3300000000000001,7.1100000000000003,7.5800000000000001,6.8399999999999999,8.5999999999999996,8.8800000000000008,7.54,7.6399999999999997,7.6399999999999997,7.4199999999999999,6.6900000000000004,6.7400000000000002,10.09,8.8100000000000005,8.4000000000000004,7.9199999999999999,8.4299999999999997,8.7799999999999994,8.7599999999999998,10.289999999999999,6.3799999999999999,8.0999999999999996,10.1,6.6699999999999999,9.0500000000000007,9.9299999999999997,8.2400000000000002,6.9199999999999999,6.5999999999999996,7.8099999999999996,8.3300000000000001,7.5199999999999996,12.27,8.4900000000000002,7.5800000000000001,7.9299999999999997,8.3699999999999992,10,8.5500000000000007],\"y\":[68.799999999999997,69.099999999999994,63.399999999999999,56.799999999999997,73.5,77.599999999999994,72.599999999999994,78.099999999999994,73.099999999999994,68.799999999999997,62,60,53.799999999999997,62.200000000000003,74.900000000000006,55.100000000000001,82.299999999999997,58.100000000000001,58.299999999999997,72.799999999999997,84.599999999999994,59.600000000000001,66.099999999999994,87.200000000000003,66.700000000000003,68.400000000000006,64.700000000000003,34.899999999999999,72.099999999999994,69.299999999999997,67.5,57.200000000000003,57.600000000000001,54.100000000000001,46,41.899999999999999,49.399999999999999,42.299999999999997,47.700000000000003,30.899999999999999,32.700000000000003,38.700000000000003,36.100000000000001,37.200000000000003,38.100000000000001,29.399999999999999,51.100000000000001,35.700000000000003,35.600000000000001,41.5,40.200000000000003,26.5,14.800000000000001,23.300000000000001,47.299999999999997,47.100000000000001,51.100000000000001,43.5,51.600000000000001,29.699999999999999,20.199999999999999,54.899999999999999,25.899999999999999,20.800000000000001,17.300000000000001,20.100000000000001,44.100000000000001,21.5,35.299999999999997,38.899999999999999,25.199999999999999,34.799999999999997,23.199999999999999,33.299999999999997,28.800000000000001,42.5,44.200000000000003,35.899999999999999,41.799999999999997,35.899999999999999,43.700000000000003,50.799999999999997,37.200000000000003,28.199999999999999,38.100000000000001,50.299999999999997,27.300000000000001,40.899999999999999,50.200000000000003,51.100000000000001,38.899999999999999,36.200000000000003,29.899999999999999,42.899999999999999,26.5,66.099999999999994,48.899999999999999,35.899999999999999,25.100000000000001,26.100000000000001,42.200000000000003,35.200000000000003],\"text\":[\"education: 13.11<br />prestige: 68.8<br />income: 12351\",\"education: 12.26<br />prestige: 69.1<br />income: 25879\",\"education: 12.77<br />prestige: 63.4<br />income:  9271\",\"education: 11.42<br />prestige: 56.8<br />income:  8865\",\"education: 14.62<br />prestige: 73.5<br />income:  8403\",\"education: 15.64<br />prestige: 77.6<br />income: 11030\",\"education: 15.09<br />prestige: 72.6<br />income:  8258\",\"education: 15.44<br />prestige: 78.1<br />income: 14163\",\"education: 14.52<br />prestige: 73.1<br />income: 11377\",\"education: 14.64<br />prestige: 68.8<br />income: 11023\",\"education: 12.39<br />prestige: 62.0<br />income:  5902\",\"education: 12.30<br />prestige: 60.0<br />income:  7059\",\"education: 13.83<br />prestige: 53.8<br />income:  8425\",\"education: 14.44<br />prestige: 62.2<br />income:  8049\",\"education: 14.36<br />prestige: 74.9<br />income:  7405\",\"education: 14.21<br />prestige: 55.1<br />income:  6336\",\"education: 15.77<br />prestige: 82.3<br />income: 19263\",\"education: 14.15<br />prestige: 58.1<br />income:  6112\",\"education: 15.22<br />prestige: 58.3<br />income:  9593\",\"education: 14.50<br />prestige: 72.8<br />income:  4686\",\"education: 15.97<br />prestige: 84.6<br />income: 12480\",\"education: 13.62<br />prestige: 59.6<br />income:  5648\",\"education: 15.08<br />prestige: 66.1<br />income:  8034\",\"education: 15.96<br />prestige: 87.2<br />income: 25308\",\"education: 15.94<br />prestige: 66.7<br />income: 14558\",\"education: 14.71<br />prestige: 68.4<br />income: 17498\",\"education: 12.46<br />prestige: 64.7<br />income:  4614\",\"education:  9.45<br />prestige: 34.9<br />income:  3485\",\"education: 13.62<br />prestige: 72.1<br />income:  5092\",\"education: 15.21<br />prestige: 69.3<br />income: 10432\",\"education: 12.79<br />prestige: 67.5<br />income:  5180\",\"education: 11.09<br />prestige: 57.2<br />income:  6197\",\"education: 12.71<br />prestige: 57.6<br />income:  7562\",\"education: 11.44<br />prestige: 54.1<br />income:  8206\",\"education: 11.59<br />prestige: 46.0<br />income:  4036\",\"education: 11.49<br />prestige: 41.9<br />income:  3148\",\"education: 11.32<br />prestige: 49.4<br />income:  4348\",\"education: 10.64<br />prestige: 42.3<br />income:  2448\",\"education: 11.36<br />prestige: 47.7<br />income:  4330\",\"education:  9.17<br />prestige: 30.9<br />income:  4761\",\"education: 12.09<br />prestige: 32.7<br />income:  3016\",\"education: 11.04<br />prestige: 38.7<br />income:  2901\",\"education:  9.22<br />prestige: 36.1<br />income:  5511\",\"education: 10.07<br />prestige: 37.2<br />income:  3739\",\"education: 10.51<br />prestige: 38.1<br />income:  3161\",\"education: 11.20<br />prestige: 29.4<br />income:  4741\",\"education: 11.13<br />prestige: 51.1<br />income:  5052\",\"education: 11.43<br />prestige: 35.7<br />income:  6259\",\"education: 11.00<br />prestige: 35.6<br />income:  4075\",\"education:  9.84<br />prestige: 41.5<br />income:  7482\",\"education: 11.13<br />prestige: 40.2<br />income:  8780\",\"education: 10.05<br />prestige: 26.5<br />income:  2594\",\"education:  9.62<br />prestige: 14.8<br />income:   918\",\"education:  9.93<br />prestige: 23.3<br />income:  2370\",\"education: 11.60<br />prestige: 47.3<br />income:  8131\",\"education: 11.09<br />prestige: 47.1<br />income:  6992\",\"education: 11.03<br />prestige: 51.1<br />income:  7956\",\"education:  9.47<br />prestige: 43.5<br />income:  8895\",\"education: 10.93<br />prestige: 51.6<br />income:  8891\",\"education:  7.74<br />prestige: 29.7<br />income:  3116\",\"education:  8.50<br />prestige: 20.2<br />income:  3930\",\"education: 10.57<br />prestige: 54.9<br />income:  7869\",\"education:  9.46<br />prestige: 25.9<br />income:   611\",\"education:  7.33<br />prestige: 20.8<br />income:  3000\",\"education:  7.11<br />prestige: 17.3<br />income:  3472\",\"education:  7.58<br />prestige: 20.1<br />income:  3582\",\"education:  6.84<br />prestige: 44.1<br />income:  3643\",\"education:  8.60<br />prestige: 21.5<br />income:  1656\",\"education:  8.88<br />prestige: 35.3<br />income:  6860\",\"education:  7.54<br />prestige: 38.9<br />income:  4199\",\"education:  7.64<br />prestige: 25.2<br />income:  5134\",\"education:  7.64<br />prestige: 34.8<br />income:  5134\",\"education:  7.42<br />prestige: 23.2<br />income:  1890\",\"education:  6.69<br />prestige: 33.3<br />income:  4443\",\"education:  6.74<br />prestige: 28.8<br />income:  3485\",\"education: 10.09<br />prestige: 42.5<br />income:  8043\",\"education:  8.81<br />prestige: 44.2<br />income:  6686\",\"education:  8.40<br />prestige: 35.9<br />income:  6565\",\"education:  7.92<br />prestige: 41.8<br />income:  6477\",\"education:  8.43<br />prestige: 35.9<br />income:  5811\",\"education:  8.78<br />prestige: 43.7<br />income:  6573\",\"education:  8.76<br />prestige: 50.8<br />income:  3942\",\"education: 10.29<br />prestige: 37.2<br />income:  5449\",\"education:  6.38<br />prestige: 28.2<br />income:  2847\",\"education:  8.10<br />prestige: 38.1<br />income:  5795\",\"education: 10.10<br />prestige: 50.3<br />income:  7716\",\"education:  6.67<br />prestige: 27.3<br />income:  4696\",\"education:  9.05<br />prestige: 40.9<br />income:  8316\",\"education:  9.93<br />prestige: 50.2<br />income:  7147\",\"education:  8.24<br />prestige: 51.1<br />income:  8880\",\"education:  6.92<br />prestige: 38.9<br />income:  5299\",\"education:  6.60<br />prestige: 36.2<br />income:  5959\",\"education:  7.81<br />prestige: 29.9<br />income:  4549\",\"education:  8.33<br />prestige: 42.9<br />income:  6928\",\"education:  7.52<br />prestige: 26.5<br />income:  3910\",\"education: 12.27<br />prestige: 66.1<br />income: 14032\",\"education:  8.49<br />prestige: 48.9<br />income:  8845\",\"education:  7.58<br />prestige: 35.9<br />income:  5562\",\"education:  7.93<br />prestige: 25.1<br />income:  4224\",\"education:  8.37<br />prestige: 26.1<br />income:  4753\",\"education: 10.00<br />prestige: 42.2<br />income:  6462\",\"education:  8.55<br />prestige: 35.2<br />income:  3617\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":1,\"size\":[16.660721975326169,22.677165354330711,14.842734412467124,14.580287634657715,14.273660427209233,15.914396931284744,14.175560136126315,17.619135368415765,16.114815010426625,15.910319843377511,12.427035458472403,13.325817068592436,14.288464597640942,14.032509056740793,13.578597510198607,12.774707017183751,20.015742425356468,12.596975599248546,15.046535800980886,11.368550980899444,16.731298395143362,12.216916358113791,14.022165393182478,22.462423182381642,17.819378180565426,19.22845517454661,11.301208056226027,10.152843800613105,11.737630609905441,15.56101005016564,11.815393179752569,12.664836900282772,13.691172379718349,14.140153058293174,10.737014094903044,9.7675348471166838,11.047004049893431,8.8749085763873623,11.029480303448864,11.438070204443983,9.6096761954920495,9.4685785689842525,12.101382219563225,10.428514176496186,9.7828570047789132,11.419593596958391,11.702031670289113,12.714010638183399,10.776513935528422,13.63397008515029,14.524530400512841,9.0735215467852282,5.8625371729199136,8.7655589267557055,14.088870980511393,13.276090674259006,13.968209067915899,14.599898060674098,14.597285391192184,9.7296506721958469,10.628504638999688,13.907687910394024,3.7795275590551185,9.5902504067543575,10.138413213231555,10.259503785503281,10.325688600296749,7.6226146980884977,13.177352458579472,10.900647552173984,11.774838908975051,11.774838908975051,8.0311761210238206,11.138799254443352,10.152843800613105,14.028372844040632,13.045590113829052,12.952846676108493,12.88480358547754,12.352348612032534,12.959007401528961,10.640874866562305,12.048566148195841,9.4011022625292533,12.339149495577745,13.800367555602303,11.377856960388032,14.214910918946806,13.390738487229376,14.590097294342831,11.919367931004821,12.473490526279978,11.239890267492395,13.228346456692915,10.607837793211825,17.552082858540071,14.567194212368715,12.144577725031317,10.925413294290694,11.430684915700786,12.873154543188305,10.297560857055201],\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":37.260273972602747},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[5.9005000000000001,16.4495],\"tickmode\":\"array\",\"ticktext\":[\"6\",\"8\",\"10\",\"12\",\"14\",\"16\"],\"tickvals\":[6,8,10,12,14,16],\"categoryorder\":\"array\",\"categoryarray\":[\"6\",\"8\",\"10\",\"12\",\"14\",\"16\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"education\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[11.18,90.820000000000007],\"tickmode\":\"array\",\"ticktext\":[\"25\",\"50\",\"75\"],\"tickvals\":[25,50,75],\"categoryorder\":\"array\",\"categoryarray\":[\"25\",\"50\",\"75\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"prestige\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"income\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"181b575572d8\":{\"x\":{},\"y\":{},\"size\":{},\"type\":\"scatter\"}},\"cur_data\":\"181b575572d8\",\"visdat\":{\"181b575572d8\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\nMake a different scatter plot using the same three variables. Keep `x = education, y = prestige` but use a different option to illustrate the influence of income.\n\n\n::: {.cell}\n\n:::\n\n\n\n# Exercise 2.9 {-}\n\nObtain the contour plot  **prestige vs. education vs. income** :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\n\nplot_ly(type = 'contour', \n        x = Prestige$education, \n        y = Prestige$income, \n        z = Prestige$prestige)\n```\n:::\n\n\nTo add axes labels and titles, try-\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_ly(\n  Prestige,\n  type = 'contour',\n  x = Prestige$education,\n  y = Prestige$income,\n  z = Prestige$prestige\n) |> layout(\n  title = 'Contour Plot of prestige scores',\n  xaxis = list(title = 'education'),\n  yaxis = list(title = 'income')\n)\n```\n:::\n\n\n\n# Exercise 2.10 {-}\n\nCreate `prestige ~ education | type` graphs.  That is, `prestige ~ education` grouped by `type` as colours and/or panels.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrestige |> \n  ggplot() + \n  aes(x = education, y = prestige, colour = type) +\n  geom_point() + \n  facet_wrap(~ type)\n```\n\n```{.r .cell-code}\n# or\n# library(plotly)\n#\n# p <- Prestige |> \n#   ggplot() + \n#   aes(x = education, y = prestige, color = type) +\n#   geom_point() + \n#   facet_wrap(~ type)\n# \n# ggplotly(p)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\np <- Prestige |> \n  ggplot() + \n  aes(x = education, y = prestige, color = type) +\n  geom_point()\n\np\n```\n\n```{.r .cell-code}\n# OR\n#\n# library(plotly)\n# ggplotly(p)\n```\n:::\n\n\n\nMore graphing examples are [here](../exercises/Chap2more.R) (R code file).",
    "supporting": [
      "ws02_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}